# Migration of "element" node translations from CSV.
#
# Since a detailed description of many configuration parameters
# has been provided in the 'hybrid_base' and 'hybrid_i18n' migrations,
# they have not been repeated here. Kindly refer to those migrations
# if you are looking for detailed descriptions for various paramters.
#
# Furthermore, since the 'element_en' migration migrates base data for
# this migration, it is highly recommended that you go through it first.

# Migration metadata
id: c11n_element_es
label: Element data in Spanish
migration_group: c11n_element
migration_tags:
  - node
  - element
  - csv
# Migration source
source:
  # We will be importing from a CSV file, so we will require
  # the migrate_source_csv module which introduces the CSV
  # source plugin with the identifier "csv".
  plugin: csv
  # Specify the path to the CSV data source.
  path: 'element.data.es.csv'
  # Number of rows at the beginning which are not actual data.
  header_row_count: 1
  # Unique ID
  #
  # It seems special characters are not supported in column names.
  # Hence, I had to rename 'SÃ­mbolo' to 'Simbolo' (notice the accent
  # mark on the letter 'i') to avoid getting error messages. Same
  # goes with the other columns mentioned in the 'fields' parameter.
  keys:
    - 'Simbolo'
  # Legend of source fields.
  fields:
    'Simbolo': 'Symbol'
    Nombre: 'Name'
    'Numero atomico': 'Atomic number'
    'Masa atomica': 'Atomic mass'
  # Static values for the migration.
  constants:
    lang_es: es
    node_element: 'element'
# Migration destination
destination:
  plugin: 'entity:node'
  # Important! Create translations for existing nodes.
  translations: true
# Migration processes
process:
  # Attach the translation to the already migrated base node.
  nid:
    plugin: migration
    source: Simbolo
    migration: c11n_element_en
  # For the rest of the fields, we migrate them as is.
  type: constants/node_element
  title: Nombre
  langcode: constants/lang_es
# Migration dependencies
migration_dependencies:
  required:
    - c11n_element_en
# General dependencies
dependencies:
  enforced:
    module:
      - c11n_migrate_i18n
